# tengai

# 유니티 심화과정 팀프로젝트
## 👨‍🏫 프로젝트 소개
- 프로젝트 명 : Slay the Spire 모작
- 프로젝트 소개 : 2D 로그라이크 명작 Slay the Spire의 모작을 통해 로그라이크 게임의 기능들을 구현
## ⏲️ 개발 기간 
- 2024.02.08 ~ 2024.02.16
  
## 🧑‍🤝‍🧑 팀 소개 
- **윤재현** : 팀장, 맵 랜덤 생성 및 연결, Main Scene UI 관리, UI 이벤트 처리
- **박민수** : 몬스터, 플레이어 스탯관리 및 애니메이션 처리
- **김승현** : 인벤토리 관리, 사운드 관리, 인트로 화면 제작, 턴 관리
- **이주환** : 카드 관련 로직 처리

## 💻 개발환경
- **유니티 버전** : 2022.3.2f
- **커밋 컨벤션 규칙**
![image](https://github.com/sda0503/tengai/assets/43924035/80329813-274b-4957-831b-16188df42a7e)

## 🧡 트러블 슈팅
윤재현
1. 맵 선긋기 알고리즘 생성 문제 [미해결]

- 단순히 좌표를 받아와서 그려주는 것만 생각한 것이 실패의 원인
생성되는 층의 방의 개수에 따라 연결되는 수가 유동적으로 바뀌어야 한다.

2. 동적 생성 클릭 이벤트 [해결]

- 동적생성한 버튼을 오브젝트 풀링을 통해서 껏다 켜는 과정에서
이벤트가 중첩되는 이슈가 발생
Onclick.RemoveAllListeners()를 사용하여 초기화 하여 해결

3. 프리팹을 사용하여 동적 생성 시 프리팹에 값 넣어주기 [해결]

- 동적 생성된 오브젝트에 값을 넣는 순서의 차이로 값이 안들어가는 이슈
var obj = Instantiate(gameObj);
obj.GetComponent<Image>().sprite = image[0];

***

박민수

1. StatSystem에서 너무 많은 버프 리스트들을 가지고있어서 for문도 많이 돌고 문제가 생길것이라 생각

- 시도 1. CharacterBaseStat에 Buff배열을 추가하여 처리를 생각 | 2024-02-08
- 결과 : CharacterBaseStat이 데이터를 두개다 가지고 외부에서 결국 처리해주어야 해서 의도한 바가 아님
- 시도 2. StatSystem에 CharacterBaseStat을 하나더 만들어 버프 스탯 계산 및 애니메이션 재생 처리 | 2024-02-10
- 결과 : 원하는 대로 수정 됬으나 즉발버프와 몇턴간 유지되는 버프들을 분리하여 관리해주어야 함
- 회고 : 스탯시스템을 먼저 만들면서 몬스터와 카드 효과 처리 구현을 나중에 구현하면서 스탯시스템을 뒤엎어야하는 문제가 생겨서 모작의 시스템을 제대로 이해못한상태로 스탯시스템을 구현하여 문제가 생긴것 같습니다

2. 모작의 리소스 파일이 스파인 파일이 버전호환이 안되 인식이 안됨 → 스파인을 통해 버전을 바꿔서 저장해야함

- 해결 방법 : 본이미지를 조립하여 프리팹으로 만든 후 애니메이션 제작으로 처리…
- 시도 이유 : 대기 모션을 제외한 공격모션과 피격모션이 단순해서 조립과 대기모션 제작외엔 시간이 오래걸리지 않을것이라 예상 했습니다

***

김승현

1. 8일, 11일, 12일 작업을 진행했으나 전혀 진행이 되지 않아서 담당한 부분을 수행하기가 어렵겠다는 생각이 들었음

- 해결책 : 팀원들에게 회의를 요청하여 현재 상황을 공유하였고 해결할 수 있을 것 같은 부분을 먼저 진행하기로 결정하였고 어려웠던 부분은 팀원들과 튜터님에게 질문해서 문제를 해결에 도움을 받음

***

이주환

1. 게임에서 플레이어의 손패를 정렬할 때 손패의 위치를 곡선으로 정렬해주고자 했는데 유니티 내에서 곡선을 어떻게 표현할 지 몰라 문제 발생

- 구글링을 통해 베지어 곡선이란걸 알게 됨. 베지어 곡선은 3개 이상의 좌표를 통해 곡선을 구하고 0부터 1까지의 곡선상의 위치를 구할 수 있는 공식. 이를 사용해서 손패 정렬, 사용 카드 버리기, 타겟 카드 드래그 시 출력되는 화살표 등 여러 곡선 표현에 사용해 문제를 해결할 수 있었다.
  
2. 실제 카드 효과들을 구현해야 했는데 이를 어떻게 구현해 관리할지의 설계에 대한 문제가 발생.

- 시도 : 구현할 효과들을 공격, 스탯 적용, 드로우, 카드 추가로 크게 큰 틀로 나누어 해당 효과들을 ICardEffect라는 OnUse함수를 가지는 인터페이스를 상속받아 해당 효과들을 구현하고 스크립터블 오브젝트에서 해당 효과들을 추가할 수 있게 구현해 이후의 다른 카드들의 추가를 쉽게하고자 했음
- 결과: 다른 카드의 추가는 쉽게 가능했지만, 여러 복잡한 효과의 구현, 효과를 순서대로밖에 실행을 못하는 점 등 여러 문제점이 발생했다. 설계단계에서부터 고쳐야 할 문제점이라고 생각하지만 이미 제출까지 시간이 얼마 남지 않아 시도 1로 그대로 진행하였다.
- 회고: 카드 설계를 관리와 추가를 쉽게 하기 위해 너무 간단한 방법으로 구현하려고 한 나머지 이러한 문제가 발생한 것 같다. 복잡한 카드 효과를 구현하기 위해서라도 어느정도의 복잡한 구조를 감수하고 이를 구현하고자 했으면 낫지 않았을까 생각을 해본다.
